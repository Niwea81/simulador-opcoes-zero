<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Simulador Educacional de OpÃ§Ãµes</title>

<style>
body{background:#020617;color:#e5e7eb;font-family:Arial}
.container{max-width:1200px;margin:30px auto;background:#020024;padding:30px;border-radius:20px}
h1,h2,h3{color:#facc15;text-align:center}
label{display:block;margin-top:14px;font-weight:bold}
input,select{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:none}
button{margin-top:25px;width:100%;padding:16px;font-size:18px;background:#2563eb;color:white;border:none;border-radius:12px;cursor:pointer}
.section{margin-top:30px;background:#020617;padding:20px;border-radius:16px}
.guided{background:#020024;border-left:4px solid #22c55e;padding:18px;margin-top:20px}
.note{background:#020024;border-left:4px solid #facc15;padding:14px;margin-top:14px}
canvas{width:100%;height:360px;background:#020024;border-radius:12px}
.legend{margin-top:10px;font-size:14px}
iframe{width:100%;height:420px;border:none;border-radius:14px}

table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:8px;text-align:center;font-size:14px}
th{background:#020024;color:#facc15}
.itm{background:#064e3b}
.atm{background:#78350f}
.otm{background:#1e293b}
.strike{font-weight:bold;color:#facc15}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ“Š Simulador Educacional de OpÃ§Ãµes</h1>

<label>Ativo</label>
<select id="ativo" onchange="atualizarGrafico()">
  <option>SPY</option><option>SPX</option><option>XSP</option><option>QQQ</option>
  <option>AAPL</option><option>MSFT</option><option>AMZN</option><option>GOOGL</option>
  <option>META</option><option>NVDA</option><option>TSLA</option>
</select>

<div class="section">
<h2>ğŸ“ˆ GrÃ¡fico de Contexto</h2>
<iframe id="tv"></iframe>
<p style="color:#94a3b8">Compare com o grÃ¡fico antes de decidir.</p>
</div>

<label>PreÃ§o atual do ativo</label>
<input id="S" type="number" value="100" oninput="autoStrike();gerarCadeia()">

<label>Volatilidade ImplÃ­cita (%)</label>
<input id="iv" type="number" value="20">

<label>Dias atÃ© o Vencimento (DTE)</label>
<input id="dte" type="number" value="7">

<label>Estrutura</label>
<select id="estrutura" onchange="ajustarEstrutura();autoStrike()">
  <option value="callLong">Call Comprada</option>
  <option value="putLong">Put Comprada</option>
  <option value="callShort">Call Vendida</option>
  <option value="putShort">Put Vendida</option>
  <option value="bull">Bull Call Spread</option>
  <option value="bear">Bear Put Spread</option>
</select>

<div id="riscoEstrutura"></div>

<div id="single">
<label>Strike</label>
<input id="K" type="number" value="100">
</div>

<div id="spread" style="display:none">
<label>Strike Comprado</label>
<input id="Kbuy" type="number" value="95">
<label>Strike Vendido</label>
<input id="Ksell" type="number" value="105">
</div>

<button onclick="analisar()">ğŸ“Š Analisar</button>

<div class="section">
<h2>ğŸ§© Cadeia de OpÃ§Ãµes (Simulada)</h2>
<p style="color:#94a3b8">Visual educacional inspirado em Tastytrade / TOS</p>
<div id="cadeia"></div>
</div>

<div class="section">
<h2>ğŸ“‰ Payoff no Vencimento</h2>
<canvas id="payoff"></canvas>
<div class="legend">
ğŸŸ¢ Lucro &nbsp; ğŸ”´ PrejuÃ­zo &nbsp; ğŸŸ¡ Break-even
</div>
</div>

<div id="resultado" class="section"></div>
<div id="aula" class="guided"></div>

</div>

<script>
function atualizarGrafico(){
  tv.src=`https://s.tradingview.com/widgetembed/?symbol=${ativo.value}&interval=15&theme=dark`;
}
atualizarGrafico();

function autoStrike(){
  const S0=+S.value;
  if(estrutura.value.includes("call")) K.value=Math.round(S0*1.01);
  if(estrutura.value.includes("put")) K.value=Math.round(S0*0.99);
}

function ajustarEstrutura(){
  const e=estrutura.value;
  single.style.display=(e!=="bull"&&e!=="bear")?"block":"none";
  spread.style.display=(e==="bull"||e==="bear")?"block":"none";

  const txt={
    callLong:"âœ”ï¸ Risco limitado ao prÃªmio.",
    putLong:"âœ”ï¸ Risco limitado ao prÃªmio.",
    callShort:"âš ï¸ Risco ilimitado. Margem obrigatÃ³ria.",
    putShort:"âš ï¸ Pode exigir compra do ativo.",
    bull:"âœ”ï¸ Risco e ganho limitados.",
    bear:"âœ”ï¸ Risco e ganho limitados."
  }[e];

  riscoEstrutura.innerHTML=`<div class="note">${txt}</div>`;
}

function gerarCadeia(){
  const S0=+S.value;
  let html=`<table>
  <tr><th>PUT</th><th>Strike</th><th>CALL</th></tr>`;
  for(let i=-5;i<=5;i++){
    const k=Math.round(S0+i*2);
    const m=k<S0?"itm":k>S0?"otm":"atm";
    html+=`
    <tr>
      <td class="${k>S0?'otm':'itm'}">Put</td>
      <td class="strike ${m}">${k}</td>
      <td class="${k<S0?'otm':'itm'}">Call</td>
    </tr>`;
  }
  html+=`</table>`;
  cadeia.innerHTML=html;
}

function analisar(){
  gerarCadeia();
  resultado.innerHTML=`<h2>ğŸ“ VariÃ¡veis</h2><p>AnÃ¡lise educacional concluÃ­da.</p>`;
  aula.innerHTML=`<h3>ğŸ“ Aula Guiada</h3>
  <p>Observe a cadeia antes de montar a estrutura.</p>
  <p>ITM, ATM e OTM mudam completamente o risco.</p>`;
}

function desenharPayoff(){}
ajustarEstrutura();autoStrike();gerarCadeia();
</script>

</body>
</html>


</body>
</html>



