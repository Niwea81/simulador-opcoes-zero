<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Simulador Educacional de OpÃ§Ãµes</title>

<style>
body{
  background:#020617;
  color:#e5e7eb;
  font-family:Arial, sans-serif;
}
.container{
  max-width:1200px;
  margin:30px auto;
  background:#020024;
  padding:30px;
  border-radius:20px;
}
h1,h2,h3{
  color:#facc15;
  text-align:center;
}
label{
  display:block;
  margin-top:14px;
  font-weight:bold;
}
input,select{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:8px;
  border:none;
}
button{
  margin-top:25px;
  width:100%;
  padding:16px;
  font-size:18px;
  background:#2563eb;
  color:white;
  border:none;
  border-radius:12px;
  cursor:pointer;
}
.section{
  margin-top:30px;
  background:#020617;
  padding:20px;
  border-radius:16px;
}
.note{
  background:#020024;
  border-left:4px solid #facc15;
  padding:14px;
  margin-top:14px;
}
.guided{
  background:#020024;
  border-left:4px solid #22c55e;
  padding:18px;
  margin-top:20px;
  line-height:1.6;
}
canvas{
  width:100%;
  height:300px;
  background:#020024;
  border-radius:12px;
}
.legend{
  color:#cbd5f5;
  margin-top:10px;
}
iframe{
  border-radius:14px;
}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ“Š Simulador Educacional de OpÃ§Ãµes</h1>

<label>Ativo</label>
<select id="ativo">
  <option>SPY</option>
  <option>SPX</option>
  <option>XSP</option>
  <option>QQQ</option>
  <option>AAPL</option>
  <option>MSFT</option>
  <option>AMZN</option>
  <option>GOOGL</option>
  <option>META</option>
  <option>NVDA</option>
  <option>TSLA</option>
</select>

<div class="section">
<h2>ğŸ“ˆ GrÃ¡fico de Contexto</h2>
<iframe
  src="https://s.tradingview.com/widgetembed/?symbol=NASDAQ:SPY&interval=15&theme=dark"
  width="100%"
  height="420"
  frameborder="0"
></iframe>
<p style="color:#94a3b8;margin-top:10px">
Compare este grÃ¡fico com o cenÃ¡rio antes de qualquer entrada.
</p>
</div>

<label>PreÃ§o do Ativo</label>
<input id="S" type="number" value="100">

<label>Volatilidade ImplÃ­cita (%)</label>
<input id="iv" type="number" value="20">

<label>Dias atÃ© o Vencimento (DTE)</label>
<input id="dte" type="number" value="7">

<label>Estrutura</label>
<select id="estrutura" onchange="ajustar()">
  <option value="call">Call Comprada</option>
  <option value="put">Put Comprada</option>
  <option value="bull">Bull Call Spread</option>
  <option value="bear">Bear Put Spread</option>
</select>

<div id="single">
<label>Strike</label>
<input id="K" type="number" value="105">
</div>

<div id="spread" style="display:none">
<label>Strike Comprado</label>
<input id="Kbuy" type="number" value="100">
<label>Strike Vendido</label>
<input id="Ksell" type="number" value="110">
</div>

<button onclick="analisar()">ğŸ“Š Analisar</button>

<div class="section">
<h2>ğŸ“‰ Payoff no Vencimento</h2>
<canvas id="payoff"></canvas>
<div class="legend">
ğŸŸ¢ Acima do breakeven: lucro<br>
ğŸŸ¡ Breakeven: nem ganha nem perde<br>
ğŸ”´ Abaixo do breakeven: risco â€” saia rÃ¡pido se o cenÃ¡rio mudar
</div>
</div>

<div id="resultado" class="section"></div>

<div id="aula" class="guided"></div>

</div>

<script>
function ajustar(){
  const e=estrutura.value;
  single.style.display=(e==="call"||e==="put")?"block":"none";
  spread.style.display=(e==="bull"||e==="bear")?"block":"none";
}

function analisar(){
  const S=+S.value;
  const ivv=+iv.value;
  const dteV=+dte.value;
  const est=estrutura.value;

  let strikes=[];
  if(est==="call"||est==="put"){
    strikes=[+K.value];
  }else{
    strikes=[+Kbuy.value,+Ksell.value];
  }

  desenharPayoff(S,est,strikes);
  mostrarResultados(S,ivv,dteV,est,strikes);
}

function desenharPayoff(S,est,strikes){
  const c=payoff,ctx=c.getContext("2d");
  c.width=c.offsetWidth;c.height=300;
  ctx.clearRect(0,0,c.width,c.height);

  const min=S*0.8,max=S*1.2;
  const zeroY=c.height*0.7;

  ctx.strokeStyle="#64748b";
  ctx.beginPath();
  ctx.moveTo(0,zeroY);
  ctx.lineTo(c.width,zeroY);
  ctx.stroke();

  ctx.strokeStyle="#22c55e";
  ctx.lineWidth=3;
  ctx.beginPath();

  let breakeven=strikes[0];

  for(let x=0;x<=c.width;x++){
    const price=min+(x/c.width)*(max-min);
    let p=0;

    if(est==="call") p=Math.max(price-strikes[0],0);
    if(est==="put") p=Math.max(strikes[0]-price,0);
    if(est==="bull") p=Math.max(price-strikes[0],0)-Math.max(price-strikes[1],0);
    if(est==="bear") p=Math.max(strikes[1]-price,0)-Math.max(strikes[0]-price,0);

    const y=zeroY-p*2;
    if(x===0)ctx.moveTo(x,y); else ctx.lineTo(x,y);
  }
  ctx.stroke();

  const bx=((breakeven-min)/(max-min))*c.width;
  ctx.fillStyle="#facc15";
  ctx.beginPath();
  ctx.arc(bx,zeroY,6,0,2*Math.PI);
  ctx.fill();
}

function mostrarResultados(S,ivv,dteV,est,strikes){
  let pop=(est==="call"||est==="put")?30:55;
  if(ivv<20) pop+=5;
  if(dteV<7) pop-=5;

  resultado.innerHTML=`
  <h2>ğŸ“ Estrutura da OperaÃ§Ã£o</h2>
  <p><b>Volatilidade (IV):</b> ${ivv}%</p>
  <p><b>DTE:</b> ${dteV} dias</p>
  <p><b>POP estimada:</b> ~${pop}%</p>
  <p><b>Risco:</b> limitado e conhecido</p>
  `;

  aula.innerHTML=`
  <h3>ğŸ“ Aula Guiada</h3>
  <p>Esta estrutura Ã© adequada quando vocÃª tem leitura direcional clara.</p>
  <p><b>Iniciante:</b> prefira spreads â€” menor custo emocional.</p>
  <p><b>Moderado:</b> direcional com IV favorÃ¡vel.</p>
  <p><b>Agressivo:</b> calls/puts compradas exigem timing.</p>
  <p><b>GestÃ£o:</b> risco mÃ¡ximo â‰¤ 1â€“2% da conta.</p>
  `;
}
</script>

</body>
</html>


